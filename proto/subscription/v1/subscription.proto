syntax = "proto3";
package subscription.v1;

option go_package = "github.com/example/ai_gateway/subscription/v1;subscriptionv1";

message CreateRequest { string user_id = 1; string plan_id = 2; }
message UpgradeRequest { string subscription_id = 1; string target_plan_id = 2; }
message DowngradeRequest { string subscription_id = 1; string target_plan_id = 2; }
message SetAutoRenewRequest { string subscription_id = 1; bool enabled = 2; }
message CancelRequest { string subscription_id = 1; }
message GetStateRequest { string subscription_id = 1; }
message SubscriptionState { string status = 1; int64 current_period_end = 2; }

service SubscriptionService {
  rpc Create (CreateRequest) returns (SubscriptionState);
  rpc Upgrade (UpgradeRequest) returns (SubscriptionState);
  rpc Downgrade (DowngradeRequest) returns (SubscriptionState);
  rpc SetAutoRenew (SetAutoRenewRequest) returns (SubscriptionState);
  rpc Cancel (CancelRequest) returns (SubscriptionState);
  rpc GetState (GetStateRequest) returns (SubscriptionState);
}

